<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>3 Exploring and understanding data | Using R for ecological modeling in USACE</title>
<meta name="author" content="Ed Stowe">
<meta name="generator" content="bookdown 0.42 with bs4_book()">
<meta property="og:title" content="3 Exploring and understanding data | Using R for ecological modeling in USACE">
<meta property="og:type" content="book">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="3 Exploring and understanding data | Using R for ecological modeling in USACE">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.8.0/transition.js"></script><script src="libs/bs3compat-0.8.0/tabs.js"></script><script src="libs/bs3compat-0.8.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<meta name="description" content="Authors: Data Carpentry contributors - Copyright (c) Data Carpentry; Ed Stowe (adaptation for USACE)Last update: 2025-02-03Acknowledgements: The bulk of this section is adapted from the Data...">
<meta property="og:description" content="Authors: Data Carpentry contributors - Copyright (c) Data Carpentry; Ed Stowe (adaptation for USACE)Last update: 2025-02-03Acknowledgements: The bulk of this section is adapted from the Data...">
<meta name="twitter:description" content="Authors: Data Carpentry contributors - Copyright (c) Data Carpentry; Ed Stowe (adaptation for USACE)Last update: 2025-02-03Acknowledgements: The bulk of this section is adapted from the Data...">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Using R for ecological modeling in USACE</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Using R for ecological modeling in USACE restoration planning</a></li>
<li><a class="" href="required-set-up-for-the-course.html">Required set-up for the course</a></li>
<li class="book-part">Basic Training on R and RStudio</li>
<li><a class="" href="introduction-to-r-and-rstudio.html"><span class="header-section-number">1</span> Introduction to R and RStudio</a></li>
<li><a class="" href="data-visualization-with-ggplot2.html"><span class="header-section-number">2</span> Data Visualization with ggplot2</a></li>
<li><a class="active" href="exploring-and-understanding-data.html"><span class="header-section-number">3</span> Exploring and understanding data</a></li>
<li><a class="" href="manipulating-tabular-data.html"><span class="header-section-number">4</span> Manipulating Tabular Data</a></li>
<li class="book-part">Ecological Modeling</li>
<li><a class="" href="conceptual-ecological-models.html"><span class="header-section-number">5</span> Conceptual Ecological Models</a></li>
<li class="book-part">Habitat Models</li>
<li><a class="" href="background-on-habitat-models-in-usace.html"><span class="header-section-number">6</span> Background on habitat models in USACE</a></li>
<li><a class="" href="habitat-suitability-index-models-with-ecorest.html"><span class="header-section-number">7</span> Habitat Suitability Index models with ecorest</a></li>
<li><a class="" href="ecorest-web-app.html"><span class="header-section-number">8</span> Ecorest Web App</a></li>
<li><a class="" href="sensitivity-and-uncertainty-analysis-for-habitat-suitability-index-hsi-models.html"><span class="header-section-number">9</span> Sensitivity and uncertainty analysis for habitat suitability index (HSI) models</a></li>
<li><a class="" href="spatial-habitat-models.html"><span class="header-section-number">10</span> Spatial Habitat Models</a></li>
<li class="book-part">Linear Models for informing planning HSIs</li>
<li><a class="" href="linear-models.html"><span class="header-section-number">11</span> Linear Models</a></li>
<li><a class="" href="generalized-linear-models.html"><span class="header-section-number">12</span> Generalized Linear Models</a></li>
<li class="book-part">Machine Learning</li>
<li><a class="" href="random-forest.html"><span class="header-section-number">13</span> Random Forest</a></li>
<li class="book-part">Other Modeling Approaches</li>
<li><a class="" href="population-modeling.html"><span class="header-section-number">14</span> Population Modeling</a></li>
<li><a class="" href="network-models-and-connectivity.html"><span class="header-section-number">15</span> Network Models and Connectivity</a></li>
<li><a class="" href="agent-based-models.html"><span class="header-section-number">16</span> Agent-based Models</a></li>
<li class="book-part">Models and decision-making</li>
<li><a class="" href="decision-support.html"><span class="header-section-number">17</span> Decision Support</a></li>
<li><a class="" href="annualizing-benefits-and-costs-with-ecorest-and-engrecon.html"><span class="header-section-number">18</span> Annualizing benefits and costs with ecorest and EngrEcon</a></li>
<li><a class="" href="ceica-chapter.html"><span class="header-section-number">19</span> Cost-Effectiveness and Incremental Cost Analysis (CEICA) with ecorest</a></li>
<li class="book-part">Other R applications</li>
<li><a class="" href="r-for-gis.html"><span class="header-section-number">20</span> R for GIS</a></li>
<li class="book-part">Environmental data sources</li>
<li><a class="" href="using-r-for-data-access.html"><span class="header-section-number">21</span> Using R for data access</a></li>
<li><a class="" href="usgs-gage-data-using-the-dataretrieval-package.html"><span class="header-section-number">22</span> USGS gage data using the dataRetrieval package</a></li>
<li><a class="" href="national-hydrography-dataset.html"><span class="header-section-number">23</span> National Hydrography Dataset</a></li>
<li class="book-part">Workshop Preparation</li>
<li><a class="" href="hsi-workshop.html"><span class="header-section-number">24</span> HSI Workshop</a></li>
<li><a class="" href="machine-learning-workshop.html"><span class="header-section-number">25</span> Machine Learning Workshop</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="exploring-and-understanding-data" class="section level1" number="3">
<h1>
<span class="header-section-number">3</span> Exploring and understanding data<a class="anchor" aria-label="anchor" href="#exploring-and-understanding-data"><i class="fas fa-link"></i></a>
</h1>
<p><em>Authors: Data Carpentry contributors - Copyright (c) Data Carpentry; Ed Stowe (adaptation for USACE)</em><br><em>Last update: 2025-02-03</em><br><em>Acknowledgements: The bulk of this <a href="https://datacarpentry.github.io/R-ecology-lesson/introduction-r-rstudio.html">section</a> is adapted from the <a href="https://datacarpentry.org">Data Carpentry</a> course <a href="https://datacarpentry.github.io/R-ecology-lesson/">Data Analysis and Visualization in R for Ecologists</a> which is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY 4.0</a> by the authors</em></p>
<div id="learning-objectives-3" class="section level2" number="3.1">
<h2>
<span class="header-section-number">3.1</span> Learning Objectives<a class="anchor" aria-label="anchor" href="#learning-objectives-3"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Explore the structure and content of data.frames</li>
<li>Understand vector types and missing data</li>
<li>Use vectors as function arguments</li>
<li>Create and convert factors</li>
<li>Understand how R assigns values to objects</li>
</ul>
</div>
<div id="setup-1" class="section level2" number="3.2">
<h2>
<span class="header-section-number">3.2</span> Setup<a class="anchor" aria-label="anchor" href="#setup-1"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">ratdat</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="the-data.frame" class="section level2" number="3.3">
<h2>
<span class="header-section-number">3.3</span> The data.frame<a class="anchor" aria-label="anchor" href="#the-data.frame"><i class="fas fa-link"></i></a>
</h2>
<p>We just spent quite a bit of time learning how to create visualizations from the <code>complete_old</code> data, but we did not talk much about <strong>what</strong> this <code>complete_old</code> thing is. It’s important to understand how R thinks about, represents, and stores data in order for us to have a productive working relationship with R.</p>
<p>The <code>complete_old</code> data is stored in R as a <strong>data.frame</strong>, which is the most common way that R represents tabular data (data that can be stored in a table format, like a spreadsheet). We can check what <code>complete_old</code> is by using the <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> function:</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "tbl_df"     "tbl"        "data.frame"</code></pre>
<p>We can view the first few rows with the <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> function, and the last few rows with the <code><a href="https://rdrr.io/r/utils/head.html">tail()</a></code> function:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 13
##   record_id month   day  year plot_id species_id sex   hindfoot_length weight
##       &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;int&gt;  &lt;int&gt;
## 1         1     7    16  1977       2 NL         M                  32     NA
## 2         2     7    16  1977       3 NL         M                  33     NA
## 3         3     7    16  1977       2 DM         F                  37     NA
## 4         4     7    16  1977       7 DM         M                  36     NA
## 5         5     7    16  1977       3 DM         M                  35     NA
## 6         6     7    16  1977       1 PF         M                  14     NA
## # ℹ 4 more variables: genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 6 × 13
##   record_id month   day  year plot_id species_id sex   hindfoot_length weight
##       &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;int&gt;  &lt;int&gt;
## 1     16873    12     5  1989       8 DO         M                  37     51
## 2     16874    12     5  1989      16 RM         F                  18     15
## 3     16875    12     5  1989       5 RM         M                  17      9
## 4     16876    12     5  1989       4 DM         M                  37     31
## 5     16877    12     5  1989      11 DM         M                  37     50
## 6     16878    12     5  1989       8 DM         F                  37     42
## # ℹ 4 more variables: genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
<p>We used these functions with just one argument, the object <code>complete_old</code>, and we didn’t give the argument a name, like we often did with <code>ggplot2</code>. In R, a function’s arguments come in a particular order, and if you put them in the correct order, you don’t need to name them. In this case, the name of the argument is <code>x</code>, so we can name it if we want, but since we know it’s the first argument, we don’t need to.</p>
<p>To learn more about a function, you can type a <code>?</code> in front of the name of the function, which will bring up the official documentation for that function:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">?</span><span class="va">head</span></span></code></pre></div>
<div class="callout">
<p>Function documentation is written by the authors of the functions, so they can vary pretty widely in their style and readability. The first section, <strong>Description</strong>, gives you a concise description of what the function does, but it may not always be enough. The <strong>Arguments</strong> section defines all the arguments for the function and is usually worth reading thoroughly. Finally, the <strong>Examples</strong> section at the end will often have some helpful examples that you can run to get a sense of what the function is doing.</p>
<p>Another great source of information is <strong>package vignettes</strong>. Many packages have vignettes, which are like tutorials that introduce the package, specific functions, or general methods. You can run <code>vignette(package = "package_name")</code> to see a list of vignettes in that package. Once you have a name, you can run <code>vignette("vignette_name", "package_name")</code> to view that vignette. You can also use a web browser to go to <code>https://cran.r-project.org/web/packages/package_name/vignettes/</code> where you will find a list of links to each vignette. Some packages will have their own websites, which often have nicely formatted vignettes and tutorials.</p>
<p>Finally, learning to search for help is probably the most useful skill for any R user. The key skill is figuring out what you should actually search for. It’s often a good idea to start your search with <code>R</code> or <code>R programming</code>. If you have the name of a package you want to use, start with <code>R package_name</code>.</p>
<p>Many of the answers you find will be from a website called Stack Overflow, where people ask programming questions and others provide answers. It is generally poor form to ask duplicate questions, so before you decide to post your own, do some thorough searching to see if it has been answered before (it likely has). If you do decide to post a question on Stack Overflow, or any other help forum, you will want to create a <strong>reproducible example</strong> or <strong>reprex</strong>. If you are asking a complicated question requiring your own data and a whole bunch of code, people probably won’t be able or willing to help you. However, if you can hone in on the specific thing you want help with, and create a minimal example using smaller, fake data, it will be much easier for others to help you. If you search <code>how to make a reproducible example in R</code>, you will find some great resources to help you out.</p>
</div>
<p>Some arguments are optional. For example, the <code>n</code> argument in <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code> specifies the number of rows to print. It defaults to 6, but we can override that by specifying a different number:</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">complete_old</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 10 × 13
##    record_id month   day  year plot_id species_id sex   hindfoot_length weight
##        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;int&gt;  &lt;int&gt;
##  1         1     7    16  1977       2 NL         M                  32     NA
##  2         2     7    16  1977       3 NL         M                  33     NA
##  3         3     7    16  1977       2 DM         F                  37     NA
##  4         4     7    16  1977       7 DM         M                  36     NA
##  5         5     7    16  1977       3 DM         M                  35     NA
##  6         6     7    16  1977       1 PF         M                  14     NA
##  7         7     7    16  1977       2 PE         F                  NA     NA
##  8         8     7    16  1977       1 DM         M                  37     NA
##  9         9     7    16  1977       1 DM         F                  34     NA
## 10        10     7    16  1977       6 PF         F                  20     NA
## # ℹ 4 more variables: genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
<p>If we order them correctly, we don’t have to name either:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">complete_old</span>, <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 10 × 13
##    record_id month   day  year plot_id species_id sex   hindfoot_length weight
##        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;int&gt;  &lt;int&gt;
##  1         1     7    16  1977       2 NL         M                  32     NA
##  2         2     7    16  1977       3 NL         M                  33     NA
##  3         3     7    16  1977       2 DM         F                  37     NA
##  4         4     7    16  1977       7 DM         M                  36     NA
##  5         5     7    16  1977       3 DM         M                  35     NA
##  6         6     7    16  1977       1 PF         M                  14     NA
##  7         7     7    16  1977       2 PE         F                  NA     NA
##  8         8     7    16  1977       1 DM         M                  37     NA
##  9         9     7    16  1977       1 DM         F                  34     NA
## 10        10     7    16  1977       6 PF         F                  20     NA
## # ℹ 4 more variables: genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
<p>Additionally, if we name them, we can put them in any order we want:</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">10</span>, x <span class="op">=</span> <span class="va">complete_old</span><span class="op">)</span></span></code></pre></div>
<pre><code>## # A tibble: 10 × 13
##    record_id month   day  year plot_id species_id sex   hindfoot_length weight
##        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;   &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;           &lt;int&gt;  &lt;int&gt;
##  1         1     7    16  1977       2 NL         M                  32     NA
##  2         2     7    16  1977       3 NL         M                  33     NA
##  3         3     7    16  1977       2 DM         F                  37     NA
##  4         4     7    16  1977       7 DM         M                  36     NA
##  5         5     7    16  1977       3 DM         M                  35     NA
##  6         6     7    16  1977       1 PF         M                  14     NA
##  7         7     7    16  1977       2 PE         F                  NA     NA
##  8         8     7    16  1977       1 DM         M                  37     NA
##  9         9     7    16  1977       1 DM         F                  34     NA
## 10        10     7    16  1977       6 PF         F                  20     NA
## # ℹ 4 more variables: genus &lt;chr&gt;, species &lt;chr&gt;, taxa &lt;chr&gt;, plot_type &lt;chr&gt;</code></pre>
<p>Generally, it’s good practice to start with the required arguments, like the data.frame whose rows you want to see, and then to name the optional arguments. If you are ever unsure, it never hurts to explicitly name an argument.</p>
<p>Let’s get back to investigating our <code>complete_old</code> data.frame. We can get some useful summaries of each variable using the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function:</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">)</span></span></code></pre></div>
<pre><code>##    record_id         month             day            year         plot_id     
##  Min.   :    1   Min.   : 1.000   Min.   : 1.0   Min.   :1977   Min.   : 1.00  
##  1st Qu.: 4220   1st Qu.: 3.000   1st Qu.: 9.0   1st Qu.:1981   1st Qu.: 5.00  
##  Median : 8440   Median : 6.000   Median :15.0   Median :1983   Median :11.00  
##  Mean   : 8440   Mean   : 6.382   Mean   :15.6   Mean   :1984   Mean   :11.47  
##  3rd Qu.:12659   3rd Qu.: 9.000   3rd Qu.:23.0   3rd Qu.:1987   3rd Qu.:17.00  
##  Max.   :16878   Max.   :12.000   Max.   :31.0   Max.   :1989   Max.   :24.00  
##                                                                                
##   species_id            sex            hindfoot_length     weight      
##  Length:16878       Length:16878       Min.   : 6.00   Min.   :  4.00  
##  Class :character   Class :character   1st Qu.:21.00   1st Qu.: 24.00  
##  Mode  :character   Mode  :character   Median :35.00   Median : 42.00  
##                                        Mean   :31.98   Mean   : 53.22  
##                                        3rd Qu.:37.00   3rd Qu.: 53.00  
##                                        Max.   :70.00   Max.   :278.00  
##                                        NA's   :2733    NA's   :1692    
##     genus             species              taxa            plot_type        
##  Length:16878       Length:16878       Length:16878       Length:16878      
##  Class :character   Class :character   Class :character   Class :character  
##  Mode  :character   Mode  :character   Mode  :character   Mode  :character  
##                                                                             
##                                                                             
##                                                                             
## </code></pre>
<p>And, as we have already done, we can use <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code> to look at the structure of an object:</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">)</span></span></code></pre></div>
<pre><code>## tibble [16,878 × 13] (S3: tbl_df/tbl/data.frame)
##  $ record_id      : int [1:16878] 1 2 3 4 5 6 7 8 9 10 ...
##  $ month          : int [1:16878] 7 7 7 7 7 7 7 7 7 7 ...
##  $ day            : int [1:16878] 16 16 16 16 16 16 16 16 16 16 ...
##  $ year           : int [1:16878] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 ...
##  $ plot_id        : int [1:16878] 2 3 2 7 3 1 2 1 1 6 ...
##  $ species_id     : chr [1:16878] "NL" "NL" "DM" "DM" ...
##  $ sex            : chr [1:16878] "M" "M" "F" "M" ...
##  $ hindfoot_length: int [1:16878] 32 33 37 36 35 14 NA 37 34 20 ...
##  $ weight         : int [1:16878] NA NA NA NA NA NA NA NA NA NA ...
##  $ genus          : chr [1:16878] "Neotoma" "Neotoma" "Dipodomys" "Dipodomys" ...
##  $ species        : chr [1:16878] "albigula" "albigula" "merriami" "merriami" ...
##  $ taxa           : chr [1:16878] "Rodent" "Rodent" "Rodent" "Rodent" ...
##  $ plot_type      : chr [1:16878] "Control" "Long-term Krat Exclosure" "Control" "Rodent Exclosure" ...</code></pre>
<p>We get quite a bit of useful information here. First, we are told that we have a data.frame of 16878 observations, or rows, and 13 variables, or columns.</p>
<p>Next, we get a bit of information on each variable, including its type (<code>int</code> or <code>chr</code>) and a quick peek at the first 10 values. You might ask why there is a <code>$</code> in front of each variable. This is because the <code>$</code> is an operator that allows us to select individual columns from a data.frame.</p>
<p>The <code>$</code> operator also allows you to use tab-completion to quickly select which variable you want from a given data.frame. For example, to get the <code>year</code> variable, we can type <code>complete_old$</code> and then hit <kbd>Tab</kbd>. We get a list of the variables that we can move through with up and down arrow keys. Hit <kbd>Enter</kbd> when you reach <code>year</code>, which should finish this code:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">complete_old</span><span class="op">$</span><span class="va">year</span></span></code></pre></div>
<pre><code>##   [1] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977
##  [16] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977
##  [31] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977
##  [46] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977
##  [61] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977
##  [76] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977
##  [91] 1977 1977 1977 1977 1977 1977 1977 1977 1977 1977
##  [ reached getOption("max.print") -- omitted 16778 entries ]</code></pre>
<p>What we get back is a whole bunch of numbers, the entries in the <code>year</code> column printed out in order.</p>
</div>
<div id="vectors-the-building-block-of-data" class="section level2" number="3.4">
<h2>
<span class="header-section-number">3.4</span> Vectors: the building block of data<a class="anchor" aria-label="anchor" href="#vectors-the-building-block-of-data"><i class="fas fa-link"></i></a>
</h2>
<p>You might have noticed that our last result looked different from when we printed out the <code>complete_old</code> data.frame itself. That’s because it is not a data.frame, it is a <strong>vector</strong>. A vector is a 1-dimensional series of values, in this case a vector of numbers representing years.</p>
<p>Data.frames are made up of vectors; each column in a data.frame is a vector. Vectors are the basic building blocks of all data in R. Basically, everything in R is a vector, a bunch of vectors stitched together in some way, or a function. Understanding how vectors work is crucial to understanding how R treats data, so we will spend some time learning about them.</p>
<p>There are 4 main types of vectors (also known as <em>atomic vectors</em>):</p>
<ol style="list-style-type: decimal">
<li><p><code>"character"</code> for strings of characters, like our <code>genus</code> or <code>sex</code> columns. Each entry in a character vector is wrapped in quotes. In other programming languages, this type of data may be referred to as “strings”.</p></li>
<li><p><code>"integer"</code> for integers. All the numeric values in <code>complete_old</code> are integers. You may sometimes see integers represented like <code>2L</code> or <code>20L</code>. The <code>L</code> indicates to R that it is an integer, instead of the next data type, <code>"numeric"</code>.</p></li>
<li><p><code>"numeric"</code>, aka <code>"double"</code>, vectors can contain numbers including decimals. Other languages may refer to these as “float” or “floating point” numbers.</p></li>
<li><p><code>"logical"</code> for <code>TRUE</code> and <code>FALSE</code>, which can also be represented as <code>T</code> and <code>F</code>. In other contexts, these may be referred to as “Boolean” data.</p></li>
</ol>
<p>Vectors can only be of a <strong>single type</strong>. Since each column in a data.frame is a vector, this means an accidental character following a number, like <code>29,</code> can change the type of the whole vector. Mixing up vector types is one of the most common mistakes in R, and it can be tricky to figure out. It’s often very useful to check the types of vectors.</p>
<p>To create a vector from scratch, we can use the <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function, putting values inside, separated by commas.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">12</span>, <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1]  1  2  5 12  4</code></pre>
<p>As you can see, those values get printed out in the console, just like with <code>complete_old$year</code>. To store this vector so we can continue to work with it, we need to assign it to an object.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">12</span>, <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p>You can check what kind of object <code>num</code> is with the <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> function.</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<p>We see that <code>num</code> is a <code>numeric</code> vector.</p>
<p>Let’s try making a character vector:</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"apple"</span>, <span class="st">"pear"</span>, <span class="st">"grape"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">char</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p>Remember that each entry, like <code>"apple"</code>, needs to be surrounded by quotes, and entries are separated with commas. If you do something like <code>"apple, pear, grape"</code>, you will have only a single entry containing that whole string.</p>
<p>Finally, let’s make a logical vector:</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">logi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">logi</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "logical"</code></pre>
</div>
<div id="challenge-1-coercion" class="section level2 challenge" number="3.5">
<h2>
<span class="header-section-number">3.5</span> Challenge 1: Coercion<a class="anchor" aria-label="anchor" href="#challenge-1-coercion"><i class="fas fa-link"></i></a>
</h2>
<p>Since vectors can only hold one type of data, something has to be done when we try to combine different types of data into one vector.</p>
<ol style="list-style-type: decimal">
<li>What type will each of these vectors be? Try to guess without running any code at first, then run the code and use <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> to verify your answers.</li>
</ol>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">num_logi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span>, <span class="fl">6</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="va">num_char</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span>, <span class="st">"10"</span>, <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">char_logi</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">tricky</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"1"</span>, <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-6" class="solution"><em>Solution</em>. </span></p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_logi</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "numeric"</code></pre>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">num_char</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">char_logi</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">tricky</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p>R will automatically convert values in a vector so that they are all the same type, a process called <strong>coercion</strong>.</p>
</div>
<ol start="2" style="list-style-type: decimal">
<li>How many values in <code>combined_logical</code> are <code>"TRUE"</code> (as a character)?</li>
</ol>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combined_logical</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">num_logi</span>, <span class="va">char_logi</span><span class="op">)</span></span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-7" class="solution"><em>Solution</em>. </span></p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combined_logical</span></span></code></pre></div>
<pre><code>## [1] "1"    "4"    "6"    "1"    "a"    "b"    "TRUE"</code></pre>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="va">combined_logical</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<p>Only one value is <code>"TRUE"</code>. Coercion happens when each vector is created, so the <code>TRUE</code> in <code>num_logi</code> becomes a <code>1</code>, while the <code>TRUE</code> in <code>char_logi</code> becomes <code>"TRUE"</code>. When these two vectors are combined, R doesn’t remember that the <code>1</code> in <code>num_logi</code> used to be a <code>TRUE</code>, it will just coerce the <code>1</code> to <code>"1"</code>.</p>
</div>
<ol start="3" style="list-style-type: decimal">
<li>Now that you’ve seen a few examples of coercion, you might have started to see that there are some rules about how types get converted. There is a hierarchy to coercion. Can you draw a diagram that represents the hierarchy of what types get converted to other types?</li>
</ol>
<div class="solution">
<p><span id="unlabeled-div-8" class="solution"><em>Solution</em>. </span>logical → integer → numeric → character</p>
<p>Logical vectors can only take on two values: <code>TRUE</code> or <code>FALSE</code>. Integer vectors can only contain integers, so <code>TRUE</code> and <code>FALSE</code> can be coerced to <code>1</code> and <code>0</code>. Numeric vectors can contain numbers with decimals, so integers can be coerced from, say, <code>6</code> to <code>6.0</code> (though R will still display a numeric <code>6</code> as <code>6</code>.). Finally, any string of characters can be represented as a character vector, so any of the other types can be coerced to a character vector.</p>
</div>
</div>
<p>Coercion is not something you will often do intentionally; rather, when combining vectors or reading data into R, a stray character that you missed may change an entire numeric vector into a character vector. It is a good idea to check the <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> of your results frequently, particularly if you are running into confusing error messages.</p>
<div id="missing-data" class="section level2" number="3.6">
<h2>
<span class="header-section-number">3.6</span> Missing data<a class="anchor" aria-label="anchor" href="#missing-data"><i class="fas fa-link"></i></a>
</h2>
<p>One of the great things about R is how it handles missing data, which can be tricky in other programming languages. R represents missing data as <code>NA</code>, without quotes, in vectors of any type. Let’s make a numeric vector with an <code>NA</code> value:</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">weights</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">34</span>, <span class="fl">12</span>, <span class="cn">NA</span>, <span class="fl">42</span><span class="op">)</span></span></code></pre></div>
<p>R doesn’t make assumptions about how you want to handle missing data, so if we pass this vector to a numeric function like <code><a href="https://rdrr.io/r/base/Extremes.html">min()</a></code>, it won’t know what to do, so it returns <code>NA</code>:</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">weights</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>This is a very good thing, since we won’t accidentally forget to consider our missing data. If we decide to exclude our missing values, many basic math functions have an argument to <strong>r</strong>e<strong>m</strong>ove them:</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">weights</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 12</code></pre>
</div>
<div id="vectors-as-arguments" class="section level2" number="3.7">
<h2>
<span class="header-section-number">3.7</span> Vectors as arguments<a class="anchor" aria-label="anchor" href="#vectors-as-arguments"><i class="fas fa-link"></i></a>
</h2>
<p>A common reason to create a vector from scratch is to use in a function argument. The <code><a href="https://rdrr.io/r/stats/quantile.html">quantile()</a></code> function will calculate a quantile for a given vector of numeric values. We set the quantile using the <code>probs</code> argument. We also need to set <code>na.rm = TRUE</code>, since there are <code>NA</code> values in the <code>weight</code> column.</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">$</span><span class="va">weight</span>, probs <span class="op">=</span> <span class="fl">0.25</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 25% 
##  24</code></pre>
<p>Now we get back the 25% quantile value for weights. However, we often want to know more than one quantile. Luckily, the <code>probs</code> argument is <strong>vectorized</strong>, meaning it can take a whole vector of values. Let’s try getting the 25%, 50% (median), and 75% quantiles all at once.</p>
<div class="sourceCode" id="cb106"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">$</span><span class="va">weight</span>, probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span><span class="op">)</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code>## 25% 50% 75% 
##  24  42  53</code></pre>
<p>While the <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> function is very flexible, it doesn’t necessarily scale well. If you want to generate a long vector from scratch, you probably don’t want to type everything out manually. There are a few functions that can help generate vectors.</p>
<p>First, putting <code>:</code> between two numbers will generate a vector of integers starting with the first number and ending with the last. The <code><a href="https://rdrr.io/r/base/seq.html">seq()</a></code> function allows you to generate similar sequences, but changing by any amount.</p>
<div class="sourceCode" id="cb108"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># generates a sequence of integers</span></span>
<span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># with seq() you can generate sequences with a combination of:</span></span>
<span><span class="co"># from: starting value</span></span>
<span><span class="co"># to: ending value</span></span>
<span><span class="co"># by: how much should each entry increase</span></span>
<span><span class="co"># length.out: how long should the resulting vector be</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] 0.0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1.0</code></pre>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">1</span>, length.out <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] 0.00000000 0.02040816 0.04081633 0.06122449 0.08163265 0.10204082
##  [7] 0.12244898 0.14285714 0.16326531 0.18367347 0.20408163 0.22448980
## [13] 0.24489796 0.26530612 0.28571429 0.30612245 0.32653061 0.34693878
## [19] 0.36734694 0.38775510 0.40816327 0.42857143 0.44897959 0.46938776
## [25] 0.48979592 0.51020408 0.53061224 0.55102041 0.57142857 0.59183673
## [31] 0.61224490 0.63265306 0.65306122 0.67346939 0.69387755 0.71428571
## [37] 0.73469388 0.75510204 0.77551020 0.79591837 0.81632653 0.83673469
## [43] 0.85714286 0.87755102 0.89795918 0.91836735 0.93877551 0.95918367
## [49] 0.97959184 1.00000000</code></pre>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, by <span class="op">=</span> <span class="fl">0.01</span>, length.out <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] 0.00 0.01 0.02 0.03 0.04 0.05 0.06 0.07 0.08 0.09 0.10 0.11 0.12 0.13 0.14
## [16] 0.15 0.16 0.17 0.18 0.19</code></pre>
<p>Finally, the <code><a href="https://rdrr.io/r/base/rep.html">rep()</a></code> function allows you to repeat a value, or even a whole vector, as many times as you want, and works with any type of vector.</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># repeats "a" 12 times</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="st">"a"</span>, times <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] "a" "a" "a" "a" "a" "a" "a" "a" "a" "a" "a" "a"</code></pre>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># repeats this whole sequence 4 times</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>, times <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] "a" "b" "c" "a" "b" "c" "a" "b" "c" "a" "b" "c"</code></pre>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># repeats each value 4 times</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, each <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1]  1  1  1  1  2  2  2  2  3  3  3  3  4  4  4  4  5  5  5  5  6  6  6  6  7
## [26]  7  7  7  8  8  8  8  9  9  9  9 10 10 10 10</code></pre>
</div>
<div id="challenge-2-creating-sequences" class="section level2 challenge" number="3.8">
<h2>
<span class="header-section-number">3.8</span> Challenge 2: Creating sequences<a class="anchor" aria-label="anchor" href="#challenge-2-creating-sequences"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Write some code to generate the following vector:</li>
</ol>
<pre><code>##  [1] -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3</code></pre>
<div class="solution">
<p><span id="unlabeled-div-9" class="solution"><em>Solution</em>. </span></p>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3</code></pre>
<div class="sourceCode" id="cb125"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># this also works</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="op">-</span><span class="fl">3</span>, to <span class="op">=</span> <span class="fl">3</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3</code></pre>
<div class="sourceCode" id="cb127"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># you might also store the sequence as an intermediate vector</span></span>
<span></span>
<span><span class="va">my_seq</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="op">-</span><span class="fl">3</span>, to <span class="op">=</span> <span class="fl">3</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/rep.html">rep</a></span><span class="op">(</span><span class="va">my_seq</span>, <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre><code>##  [1] -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3 -3 -2 -1  0  1  2  3</code></pre>
</div>
<ol start="2" style="list-style-type: decimal">
<li>Calculate the quantiles for the <code>complete_old</code> hindfoot lengths at every 5% level (0%, 5%, 10%, 15%, etc.)</li>
</ol>
<div class="solution">
<p><span id="unlabeled-div-10" class="solution"><em>Solution</em>. </span></p>
<div class="sourceCode" id="cb129"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">complete_old</span><span class="op">$</span><span class="va">hindfoot_length</span>, </span>
<span>         probs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">0</span>, to <span class="op">=</span> <span class="fl">1</span>, by <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span>,</span>
<span>         na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre><code>##   0%   5%  10%  15%  20%  25%  30%  35%  40%  45%  50%  55%  60%  65%  70%  75% 
##    6   16   17   19   20   21   22   31   33   34   35   35   36   36   36   37 
##  80%  85%  90%  95% 100% 
##   37   39   49   51   70</code></pre>
</div>
</div>
<div id="building-with-vectors" class="section level2" number="3.9">
<h2>
<span class="header-section-number">3.9</span> Building with vectors<a class="anchor" aria-label="anchor" href="#building-with-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>We have now seen vectors in a few different forms: as columns in a data.frame and as single vectors. However, they can be manipulated into lots of other shapes and forms. Some other common forms are:</p>
<ul>
<li>matrices
<ul>
<li>2-dimensional numeric representations</li>
</ul>
</li>
<li>arrays
<ul>
<li>many-dimensional numeric</li>
</ul>
</li>
<li>lists
<ul>
<li>lists are very flexible ways to store vectors</li>
<li>a list can contain vectors of many different types and lengths</li>
<li>an entry in a list can be another list, so lists can get deeply nested</li>
<li>a data.frame is a type of list where each column is an individual vector and each vector has to be the same length, since a data.frame has an entry in every column for each row</li>
</ul>
</li>
<li>factors
<ul>
<li>a way to represent categorical data</li>
<li>factors can be ordered or unordered</li>
<li>they often <em>look</em> like character vectors, but behave differently</li>
<li>under the hood, they are integers with character labels, called <strong>levels</strong>, for each integer</li>
</ul>
</li>
</ul>
<div id="factors" class="section level3" number="3.9.1">
<h3>
<span class="header-section-number">3.9.1</span> Factors<a class="anchor" aria-label="anchor" href="#factors"><i class="fas fa-link"></i></a>
</h3>
<p>We will spend a bit more time talking about factors, since they are often a challenging type of data to work with. We can create a factor from scratch by putting a character vector made using <code><a href="https://rdrr.io/r/base/c.html">c()</a></code> into the <code><a href="https://rdrr.io/r/base/factor.html">factor()</a></code> function:</p>
<div class="sourceCode" id="cb131"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span>, <span class="st">"female"</span>, <span class="st">"male"</span>, <span class="st">"female"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sex</span></span></code></pre></div>
<pre><code>## [1] male   female female male   female &lt;NA&gt;  
## Levels: female male</code></pre>
<p>We can inspect the levels of the factor using the <code><a href="https://rdrr.io/r/base/levels.html">levels()</a></code> function:</p>
<div class="sourceCode" id="cb133"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/levels.html">levels</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "female" "male"</code></pre>
<p>The <strong><code>forcats</code></strong> package from the <code>tidyverse</code> has a lot of convenient functions for working with factors. We will show you a few common operations, but the <code>forcats</code> package has many more useful functions.</p>
<div class="sourceCode" id="cb135"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/">forcats</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># change the order of the levels</span></span>
<span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_relevel.html">fct_relevel</a></span><span class="op">(</span><span class="va">sex</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] male   female female male   female &lt;NA&gt;  
## Levels: male female</code></pre>
<div class="sourceCode" id="cb137"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># change the names of the levels</span></span>
<span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_recode.html">fct_recode</a></span><span class="op">(</span><span class="va">sex</span>, <span class="st">"M"</span> <span class="op">=</span> <span class="st">"male"</span>, <span class="st">"F"</span> <span class="op">=</span> <span class="st">"female"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] M    F    F    M    F    &lt;NA&gt;
## Levels: F M</code></pre>
<div class="sourceCode" id="cb139"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># turn NAs into an actual factor level (useful for including NAs in plots)</span></span>
<span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_na_value_to_level.html">fct_na_value_to_level</a></span><span class="op">(</span><span class="va">sex</span>, <span class="st">"(Missing)"</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] male      female    female    male      female    (Missing)
## Levels: female male (Missing)</code></pre>
<p>In general, it is a good practice to leave your categorical data as a <strong>character</strong> vector until you need to use a factor. Here are some reasons you might need a factor:</p>
<ol style="list-style-type: decimal">
<li>Another function requires you to use a factor</li>
<li>You are plotting categorical data and want to control the ordering of categories in the plot</li>
</ol>
<p>Since factors can behave differently from character vectors, it is always a good idea to check what type of data you’re working with. You might use a new function for the first time and be confused by the results, only to realize later that it produced a factor as an output, when you thought it was a character vector.</p>
<p>It is fairly straightforward to convert a factor to a character vector:</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">sex</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] "male"   "female" "female" "male"   "female" NA</code></pre>
<p>However, you need to be careful if you’re somehow working with a factor that has numbers as its levels:</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f_num</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1990</span>, <span class="fl">1983</span>, <span class="fl">1977</span>, <span class="fl">1998</span>, <span class="fl">1990</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># this will pull out the underlying integers, not the levels</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">f_num</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 3 2 1 4 3</code></pre>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if we first convert to characters, we can then convert to numbers</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">f_num</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1990 1983 1977 1998 1990</code></pre>
</div>
</div>
<div id="assignment-objects-and-values" class="section level2" number="3.10">
<h2>
<span class="header-section-number">3.10</span> Assignment, objects, and values<a class="anchor" aria-label="anchor" href="#assignment-objects-and-values"><i class="fas fa-link"></i></a>
</h2>
<p>We’ve already created quite a few objects in R using the <code>&lt;-</code> assignment arrow, but there are a few finer details worth talking about. First, let’s start with a quick challenge.</p>
</div>
<div id="challenge-3-assignments-and-objects" class="section level2 challenge" number="3.11">
<h2>
<span class="header-section-number">3.11</span> Challenge 3: Assignments and objects<a class="anchor" aria-label="anchor" href="#challenge-3-assignments-and-objects"><i class="fas fa-link"></i></a>
</h2>
<p>What is the value of <code>y</code> after running the following code?</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">10</span></span></code></pre></div>
<div class="solution">
<p><span id="unlabeled-div-11" class="solution"><em>Solution</em>. </span></p>
<div class="sourceCode" id="cb148"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">10</span></span>
<span><span class="va">y</span></span></code></pre></div>
<pre><code>## [1] 5</code></pre>
</div>
</div>
<p>Understanding what’s going on here will help you avoid a lot of confusion when working in R. When we assign something to an object, the first thing that happens is the righthand side gets <em>evaluated</em>. The same thing happens when you run something in the console: if you type <code>x</code> into the console and hit <kbd>Enter</kbd>, R returns the value of <code>x</code>. So when we first ran the line <code>y &lt;- x</code>, <code>x</code> first gets evaluated to the value of <code>5</code>, and this gets assigned to <code>y</code>. The objects <code>x</code> and <code>y</code> are not actually linked to each other in any way, so when we change the value of <code>x</code> to <code>10</code>, <code>y</code> is unaffected.</p>
<p>This also means you can run multiple nested operations, store intermediate values as separate objects, or overwrite values:</p>
<div class="sourceCode" id="cb150"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span></span>
<span><span class="co"># first, x gets evaluated to 5</span></span>
<span><span class="co"># then 5/2 gets evaluated to 2.5</span></span>
<span><span class="co"># then sqrt(2.5) is evaluated</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">/</span><span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1.581139</code></pre>
<div class="sourceCode" id="cb152"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># we can also store the evaluated value of x/2 </span></span>
<span><span class="co"># in an object y before passing it to sqrt()</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">/</span><span class="fl">2</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre><code>## [1] 1.581139</code></pre>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># first, the x on the righthand side gets evaluated to 5</span></span>
<span><span class="co"># then 5 gets squared</span></span>
<span><span class="co"># then the resulting value is assigned to the object x</span></span>
<span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">^</span><span class="fl">2</span></span>
<span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code>## [1] 25</code></pre>
<p>You will be naming a of objects in R, and there are a few common naming rules and conventions:</p>
<ul>
<li>make names clear without being too long
<ul>
<li>
<code>wkg</code> is probably too short</li>
<li>
<code>weight_in_kilograms</code> is probably too long</li>
<li>
<code>weight_kg</code> is good</li>
</ul>
</li>
<li>names cannot start with a number</li>
<li>names are case sensitive</li>
<li>you cannot use the names of fundamental functions in R, like <code>if</code>, <code>else</code>, or <code>for</code>
<ul>
<li>in general, avoid using names of common functions like <code>c</code>, <code>mean</code>, etc.</li>
</ul>
</li>
<li>avoid dots <code>.</code> in names, as they have a special meaning in R, and may be confusing to others</li>
<li>two common formats are <code>snake_case</code> and <code>camelCase</code>
</li>
<li>be consistent, at least within a script, ideally within a whole project</li>
<li>you can use a style guide like <a href="https://google.github.io/styleguide/Rguide.xml">Google’s</a> or
<a href="https://style.tidyverse.org/">tidyverse’s</a>
</li>
</ul>
<div class="keypoints">
<ul>
<li>functions like <code><a href="https://rdrr.io/r/utils/head.html">head()</a></code>, <code><a href="https://rdrr.io/r/utils/str.html">str()</a></code>, and <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> are useful for exploring data.frames</li>
<li>most things in R are vectors, vectors stitched together, or functions</li>
<li>make sure to use <code><a href="https://rdrr.io/r/base/class.html">class()</a></code> to check vector types, especially when using new functions</li>
<li>factors can be useful, but behave differently from character vectors</li>
</ul>
</div>

</div>
  <div class="chapter-nav">
<div class="prev"><a href="data-visualization-with-ggplot2.html"><span class="header-section-number">2</span> Data Visualization with ggplot2</a></div>
<div class="next"><a href="manipulating-tabular-data.html"><span class="header-section-number">4</span> Manipulating Tabular Data</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#exploring-and-understanding-data"><span class="header-section-number">3</span> Exploring and understanding data</a></li>
<li><a class="nav-link" href="#learning-objectives-3"><span class="header-section-number">3.1</span> Learning Objectives</a></li>
<li><a class="nav-link" href="#setup-1"><span class="header-section-number">3.2</span> Setup</a></li>
<li><a class="nav-link" href="#the-data.frame"><span class="header-section-number">3.3</span> The data.frame</a></li>
<li><a class="nav-link" href="#vectors-the-building-block-of-data"><span class="header-section-number">3.4</span> Vectors: the building block of data</a></li>
<li><a class="nav-link" href="#challenge-1-coercion"><span class="header-section-number">3.5</span> Challenge 1: Coercion</a></li>
<li><a class="nav-link" href="#missing-data"><span class="header-section-number">3.6</span> Missing data</a></li>
<li><a class="nav-link" href="#vectors-as-arguments"><span class="header-section-number">3.7</span> Vectors as arguments</a></li>
<li><a class="nav-link" href="#challenge-2-creating-sequences"><span class="header-section-number">3.8</span> Challenge 2: Creating sequences</a></li>
<li>
<a class="nav-link" href="#building-with-vectors"><span class="header-section-number">3.9</span> Building with vectors</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#factors"><span class="header-section-number">3.9.1</span> Factors</a></li></ul>
</li>
<li><a class="nav-link" href="#assignment-objects-and-values"><span class="header-section-number">3.10</span> Assignment, objects, and values</a></li>
<li><a class="nav-link" href="#challenge-3-assignments-and-objects"><span class="header-section-number">3.11</span> Challenge 3: Assignments and objects</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Using R for ecological modeling in USACE</strong>" was written by Ed Stowe. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
